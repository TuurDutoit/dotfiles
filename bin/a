#! /bin/zsh

s () {
  AVAILABLE_DEVICES=$(adb devices | tail -n +2 | cut -f1)
  DEVICES=${1:-$AVAILABLE_DEVICES}

  for d in $DEVICES; do
    echo $d
    adb -s $d reverse tcp:8081 tcp:8081
    adb -s $d reverse tcp:8083 tcp:8083
    adb -s $d reverse tcp:3000 tcp:3000
    adb -s $d reverse tcp:1234 tcp:1234
    adb -s $d reverse tcp:9090 tcp:9090
  done
}

m () {
  DEVICES=$(adb devices | tail -n +2 | cut -f1)

  for d in $DEVICES; do
    echo $d
    adb -s $d shell input keyevent 82
  done
}

e () {
  emulator -avd "$(emulator -list-avds | head -n 1)" &
}

d () {
  adb devices
}

p () {
  adb shell settings put global http_proxy 127.0.0.1:9090
}

pu () {
  adb shell settings put global http_proxy :0
}

$@